<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="utf-8">
    <title>{{TITLE}} · Paste</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <style>
      html, body { height: 100%; margin: 0; }
      body {
        display: flex;
        flex-direction: column;
        align-items: center;
        background: #050508;
        color: #f5f5f5;
        font-family: 'Roboto', sans-serif;
        padding: 32px;
        box-sizing: border-box;
      }
      .container {
        width: min(960px, 100%);
        padding: 32px;
        display: flex;
        flex-direction: column;
        gap: 20px;
      }
      h1 { letter-spacing: 0.15em; font-weight: 300; margin: 0 0 12px; }
      .big {
        font-size: 50px;
        letter-spacing: 0.2em;
        font-weight: 900;
        text-align: center;
      }
      small { color: rgba(245, 245, 245, 0.6); letter-spacing: 0.1em; text-transform: uppercase; }
      a { color: #f5f5f5; text-decoration: none; font-weight: 500; }
      pre {
        background: rgba(12, 12, 18, 0.65);
        padding: 20px 24px;
        border-radius: 16px;
        overflow-x: auto;
        line-height: 1.5;
        font-family: 'Roboto Mono', 'JetBrains Mono', monospace;
        border: 1px solid rgba(255, 255, 255, 0.08);
        color: #ffffff;
      }
      .paste-content-wrapper {
        position: relative;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }
        .copy-button {
          position: sticky;
          top: 20px;
          right: 20px;
          margin-left: auto;
          padding: 8px 14px;
        border: 1px solid rgba(245, 245, 245, 0.2);
        border-radius: 999px;
        background: rgba(5, 5, 8, 0.7);
        color: #f5f5f5;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        font-weight: 500;
        cursor: pointer;
        backdrop-filter: blur(6px);
        display: inline-flex;
        align-items: center;
        gap: 8px;
        z-index: 2;
      }
      .copy-button:disabled {
        opacity: 0.6;
        cursor: default;
      }
      .copy-icon {
        width: 16px;
        height: 16px;
        display: inline-block;
      }
      .paste-code {
        display: flex;
        gap: 16px;
      }
      .paste-code pre {
        margin: 0;
      }
      .line-numbers {
        min-width: 3rem;
        padding-right: 12px;
        text-align: right;
        background: transparent;
        color: rgba(245, 245, 245, 0.6);
        border: none;
        font-family: 'Roboto Mono', 'JetBrains Mono', monospace;
        user-select: none;
      }
      .line-numbers::-webkit-scrollbar,
      #paste-content::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1 class="big">{{TITLE}}</h1>
        <small>Utworzono: {{CREATED_AT}} · <a href="/">nowa wklejka</a> · <a href="/raw/{{SLUG}}">raw</a></small>
      </header>
      <div class="paste-content-wrapper">
        <button type="button" class="copy-button" id="copy-paste-button">
          <span class="copy-icon" aria-hidden="true">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="7" y="7" width="13" height="13" rx="2" stroke="#f5f5f5" stroke-width="1.5" />
              <rect x="4" y="4" width="13" height="13" rx="2" stroke="#f5f5f5" stroke-width="1.5" opacity="0.6" />
            </svg>
          </span>
          <span class="copy-label">Kopiuj</span>
        </button>
        <div class="paste-code">
          <pre class="line-numbers" aria-hidden="true" id="paste-line-numbers"></pre>
          <pre id="paste-content">{{CONTENT}}</pre>
        </div>
      </div>
    </div>
    <script>
      (function() {
        const button = document.getElementById('copy-paste-button');
        const content = document.getElementById('paste-content');
        const lineNumbers = document.getElementById('paste-line-numbers');
        const pasteCode = document.querySelector('.paste-code');
        if (!button || !content) {
          return;
        }
        if (lineNumbers) {
          const lines = content.innerText.split('\n');
          lineNumbers.textContent = lines.map((_, idx) => String(idx + 1)).join('\n');
        }
        const label = button.querySelector('.copy-label');
        const originalLabel = label ? label.textContent : button.textContent;
        function restoreLabel() {
          if (label) {
            label.textContent = originalLabel;
          } else {
            button.textContent = originalLabel;
          }
          button.disabled = false;
        }
        button.addEventListener('click', async () => {
          const text = content.innerText;
          button.disabled = true;
          if (label) {
            label.textContent = 'Kopiowanie...';
          } else {
            button.textContent = 'Kopiowanie...';
          }
          try {
            if (navigator.clipboard && navigator.clipboard.writeText) {
              await navigator.clipboard.writeText(text);
            } else {
              const temp = document.createElement('textarea');
              temp.value = text;
              temp.style.position = 'fixed';
              temp.style.top = '-1000px';
              document.body.appendChild(temp);
              temp.focus();
              temp.select();
              document.execCommand('copy');
              document.body.removeChild(temp);
            }
            if (label) {
              label.textContent = 'Skopiowano!';
            } else {
              button.textContent = 'Skopiowano!';
            }
          } catch (err) {
            console.error('Failed to copy paste content', err);
            if (label) {
              label.textContent = 'Błąd kopiowania';
            } else {
              button.textContent = 'Błąd kopiowania';
            }
          } finally {
            setTimeout(restoreLabel, 1600);
          }
        });

        if (pasteCode) {
          pasteCode.addEventListener('click', () => {
            if (!content) {
              return;
            }
            const selection = window.getSelection();
            if (!selection) {
              return;
            }
            const range = document.createRange();
            range.selectNodeContents(content);
            selection.removeAllRanges();
            selection.addRange(range);
          });
        }
      })();
    </script>
  </body>
</html>
